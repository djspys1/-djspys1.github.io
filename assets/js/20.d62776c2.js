(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{339:function(e,s,a){"use strict";a.r(s);var t=a(33),r=Object(t.a)({},(function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"redis安装与使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redis安装与使用"}},[e._v("#")]),e._v(" redis安装与使用")]),e._v(" "),a("h2",{attrs:{id:"centos7安装redis"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#centos7安装redis"}},[e._v("#")]),e._v(" centos7安装Redis")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("sudo apt-get install redis-server\n")])])]),a("ul",[a("li",[e._v("检查Redis服务器系统进程")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("~ ps -aux|grep redis\nredis     4162  0.1  0.0  10676  1420 ?        Ss   23:24   0:00 /usr/bin/redis-server /etc/redis/redis.conf\nconan     4172  0.0  0.0  11064   924 pts/0    S+   23:26   0:00 grep --color=auto redis\n")])])]),a("ul",[a("li",[e._v("通过启动命令检查Redis服务器状态")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("~ netstat -nlt|grep 6379\ntcp        0      0 127.0.0.1:6379          0.0.0.0:*               LISTEN\n")])])]),a("ul",[a("li",[e._v("通过启动命令检查Redis服务器状态")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("~ sudo /etc/init.d/redis-server status\nredis-server is running\n")])])]),a("ul",[a("li",[e._v("通过命令行客户端访问Redis")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("~ redis-cli\nredis 127.0.0.1:6379>\n")])])]),a("ul",[a("li",[e._v("命令行的帮助")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('redis 127.0.0.1:6379> help\nredis-cli 2.2.12\nType: "help @" to get a list of commands in \n      "help " for help on \n      "help " to get a list of possible help topics\n      "quit" to exit\n')])])]),a("ul",[a("li",[a("p",[e._v("修改Redis的配置")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("使用Redis的访问账号")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("默认情况下，访问Redis服务器是不需要密码的，为了增加安全性我们需要设置Redis服务器的访问密码。设置访问密码为redisredis。")])]),e._v(" "),a("li",[a("p",[e._v("用vi打开Redis服务器的配置文件redis.conf")])])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("~ sudo vi /etc/redis/redis.conf\n")])])])]),e._v(" "),a("li",[a("p",[e._v("取消注释requirepass")])])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("requirepass redisredis\n")])])]),a("ul",[a("li",[a("p",[e._v("让Redis服务器被远程访问")]),e._v(" "),a("ul",[a("li",[e._v("默认情况下，Redis服务器不允许远程访问，只允许本机访问，所以我们需要设置打开远程访问的功能。")]),e._v(" "),a("li",[e._v("用vi打开Redis服务器的配置文件redis.conf")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("~ sudo vi /etc/redis/redis.conf\n")])])]),a("ul",[a("li",[e._v("注释bind")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("#bind 127.0.0.1\n")])])]),a("ul",[a("li",[e._v("修改后，重启Redis服务器。")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("~ sudo /etc/init.d/redis-server restart\nStopping redis-server: redis-server.\nStarting redis-server: redis-server.\n")])])])]),e._v(" "),a("li",[a("p",[e._v("未使用密码登陆Redis服务器")])])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("~ redis-cli\nredis 127.0.0.1:6379> keys *\n(error) ERR operation not permitted\n")])])]),a("ul",[a("li",[a("p",[e._v("发现可以登陆，但无法执行命令了。")])]),e._v(" "),a("li",[a("p",[e._v("登陆Redis服务器，输入密码")])])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('~  redis-cli -a redisredis\nredis 127.0.0.1:6379> keys *\n             1) "key2"\n             2) "key3"\n             3) "key4"\n')])])]),a("ul",[a("li",[a("p",[e._v("登陆后，一切正常。")])]),e._v(" "),a("li",[a("p",[e._v("检查Redis的网络监听端口")])]),e._v(" "),a("li",[a("p",[e._v("检查Redis服务器占用端口")])])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("~ netstat -nlt|grep 6379\ntcp        0      0 0.0.0.0:6379            0.0.0.0:*               LISTEN\n")])])]),a("ul",[a("li",[a("p",[e._v("我们看到从之间的网络监听从 127.0.0.1:3306 变成 0 0.0.0.0:3306，表示Redis已经允许远程登陆访问。")])]),e._v(" "),a("li",[a("p",[e._v("我们在远程的另一台Linux访问Redis服务器")])])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('~ redis-cli -a redisredis -h 192.168.1.199\nredis 192.168.1.199:6379> keys *\n1) "key2"\n2) "key3"\n3) "key4"\n')])])])])]),e._v(" "),a("p",[a("a",{attrs:{href:"http://blog.fens.me/linux-redis-install/",target:"_blank",rel:"noopener noreferrer"}},[e._v("参考文档"),a("OutboundLink")],1)]),e._v(" "),a("h2",{attrs:{id:"redis实现主从配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redis实现主从配置"}},[e._v("#")]),e._v(" redis实现主从配置")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("假设有2台服务器，一台master，一台slave")]),e._v(" "),a("ul",[a("li",[e._v("配置master下的redis.con文件\n"),a("ul",[a("li",[e._v("bind {masterIp}")]),e._v(" "),a("li",[e._v("requirepass {your pass}")])])]),e._v(" "),a("li",[e._v("配置slave服务器下的redis.con文件\n"),a("ul",[a("li",[e._v("bind {slaveIp}")]),e._v(" "),a("li",[e._v("slaveof {masterIp} {masterPort}")]),e._v(" "),a("li",[e._v("masterauth {masterRequirepass}")])])])])]),e._v(" "),a("li",[a("p",[e._v("测试")]),e._v(" "),a("ul",[a("li",[e._v("启动master服务器的redis")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("sudo redis-cli -h 192.168.107.130\nauth {masterRequirepass}\nset a 1\nset b 2\nkeys *\n")])])]),a("ul",[a("li",[e._v("启动slave服务器的redis")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("sudo redis-cli -h 192.168.107.131\nkeys *\n")])])])])])])}),[],!1,null,null,null);s.default=r.exports}}]);